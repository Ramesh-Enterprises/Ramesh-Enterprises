<script>
  function toggleTheme() {
    document.body.classList.toggle("dark");
  }

  const chatlog = document.getElementById("chatlog");
  const userInput = document.getElementById("userInput");

  userInput.addEventListener("keypress", function (e) {
    if (e.key === "Enter" && userInput.value.trim() !== "") {
      const msg = userInput.value.trim();
      appendMessage("You", msg);
      userInput.value = "";

      const reply = getBotReply(msg);
      showTypingEffect("Bot", reply);
    }
  });

  function appendMessage(sender, text) {
    const p = document.createElement("p");
    p.innerHTML = `<strong>${sender}:</strong> ${text}`;
    chatlog.appendChild(p);
    chatlog.scrollTop = chatlog.scrollHeight;
  }

  function showTypingEffect(sender, message) {
    const p = document.createElement("p");
    p.innerHTML = `<strong>${sender}:</strong> <span class="bot-typing"></span>`;
    chatlog.appendChild(p);
    let i = 0;
    const span = p.querySelector("span");
    const typing = setInterval(() => {
      span.textContent += message[i];
      i++;
      chatlog.scrollTop = chatlog.scrollHeight;
      if (i >= message.length) clearInterval(typing);
    }, 30);
  }

  const responses = {
    greetings: [
      "Hey there! How can I help you today?",
      "Hello! Welcome to Ramesh Enterprises.",
      "Hi! Feel free to ask me anything."
    ],
    food: [
      "We serve everything from Dosas to Rasgullas. Hungry already?",
      "Try our Signature Dosa Series or the Mango Pulav!",
      "Our Bullock Cart Biryani is a fan favorite."
    ],
    contact: [
      "You can call us at 99785-RAMESH.",
      "Reach out anytime! Our contact is in the 'Contact' section.",
      "Customer support is one call away: 99785-RAMESH."
    ],
    products: [
      "We offer phones, gym kits, bullock carts â€” and dreams!",
      "From protein shakes to thalis, we sell vibes.",
      "Innovation meets culture in all our products."
    ],
    thanks: [
      "You're welcome! Always happy to help.",
      "Glad to assist. Let me know if you need more.",
      "Anytime! Thanks for visiting Ramesh Enterprises."
    ],
    goodbye: [
      "Goodbye! Hope to see you again!",
      "Take care and come back soon!",
      "Thanks for stopping by! ðŸ‘‹"
    ],
    fallback: [
      "Hmm... I didnâ€™t quite catch that. Could you try asking differently?",
      "Interesting... but Iâ€™m not sure how to respond to that yet.",
      "A team member might help better with that. Try something else for now?"
    ]
  };

  function getBotReply(msg) {
    const m = msg.toLowerCase();

    if (m.match(/(hi|hello|hey|greetings)/)) return randomFrom(responses.greetings);
    if (m.match(/(menu|food|eat|dosa|biryani|rasgulla|restaurant|lunch|dinner)/)) return randomFrom(responses.food);
    if (m.match(/(contact|call|phone|reach|number)/)) return randomFrom(responses.contact);
    if (m.match(/(product|sell|buy|items|catalog)/)) return randomFrom(responses.products);
    if (m.match(/(thank|thanks|thx)/)) return randomFrom(responses.thanks);
    if (m.match(/(bye|goodbye|see you|later)/)) return randomFrom(responses.goodbye);

    return randomFrom(responses.fallback);
  }

  function randomFrom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }
</script>
